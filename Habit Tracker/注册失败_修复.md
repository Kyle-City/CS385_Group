# 注册失败问题修复

## 问题原因

如果你在手机上使用 Expo Go 应用，**API 地址配置为 `localhost:3000` 会导致无法连接到后端服务器**。

- `localhost` 在手机上指向手机本身，不是你的电脑
- 需要使用你电脑的 **IP 地址** 来连接

## 解决方案

### 步骤 1: 找到你电脑的 IP 地址

在 PowerShell 中运行：
```powershell
ipconfig
```

查找 "IPv4 地址"，例如：`192.168.1.100`

### 步骤 2: 更新 API 地址配置

需要修改两个文件：

#### 文件 1: `frontend/context/AuthContext.js`

将：
```javascript
const API_BASE_URL = 'http://localhost:3000';
```

改为：
```javascript
const API_BASE_URL = 'http://192.168.1.100:3000';  // 替换为你的 IP
```

#### 文件 2: `frontend/services/api.js`

将：
```javascript
const API_BASE_URL = 'http://localhost:3000';
```

改为：
```javascript
const API_BASE_URL = 'http://192.168.1.100:3000';  // 替换为你的 IP
```

### 步骤 3: 确保后端服务器正在运行

```cmd
cd D:\Habit Tracker\backend
npm run dev
```

应该看到：`Server running on port 3000`

### 步骤 4: 确保手机和电脑在同一网络

- 手机和电脑必须连接到同一个 Wi-Fi 网络
- 确保防火墙没有阻止端口 3000

### 步骤 5: 重新加载应用

1. 在手机上完全关闭 Expo Go
2. 重新打开并扫描二维码
3. 尝试注册

## 其他可能的问题

### 1. 后端服务器没有运行
- 检查后端是否在端口 3000 上运行
- 尝试在浏览器访问：`http://你的IP:3000/auth/me`（应该返回错误，但说明服务器在运行）

### 2. 防火墙阻止连接
- Windows 防火墙可能阻止了端口 3000
- 临时关闭防火墙测试，或添加端口 3000 的例外规则

### 3. 网络问题
- 确保手机和电脑在同一 Wi-Fi 网络
- 如果使用公司/学校网络，可能需要配置 VPN

## 验证修复

修复后，你应该能够：
- ✅ 成功注册账户
- ✅ 成功登录
- ✅ 看到应用界面


